{
    "portfolio": "SPY.ARCA",
    "signal_variable": "signal",
    "eval_score": "score",
    "columns": {
        "date": "DATE(ending)",
        "change": "close - PREV('close')",
        "close": "day.adj_close",
        "proceeds": "(change * PREV('signal') - cost) * 100",
        "gain": "(profit + past_profit)/(1 + past_years)",
        "pain": "(drawdown + past_drawdown)/(1 + past_years)",
        "signal": "sma_cross",
        "score": "gain/pain"
    },
    "variables": {
        "sma_cross": "MAX(SIGN(SMA(fast_len,day.adj_close)-SMA(slow_len,day.adj_close)),0)",
        "cost": "IF (signal!=PREV('signal'), 0.025)",
        "profit": "IF(newyear,0,PREV('profit')) + proceeds",
        "peak": "IF(PREV('peak')>profit AND !newyear,PREV('peak'),profit)",
        "drawdown": "IF(PREV('drawdown')>peak-profit AND !newyear,PREV('drawdown'),peak-profit)",
        "year": "YEAR(ending)",
        "newyear": "year!=PREV('year',year)",
        "past_years": "PREV('past_years')+IF(newyear,1)",
        "past_profit": "PREV('past_profit') + IF(newyear,PREV('profit'))",
        "past_drawdown": "PREV('past_drawdown') + IF(newyear,PREV('drawdown'))"
    },
     "parameters": {
        "fast_len": 25,
        "slow_len": 200
    },
    "signals": ["sma_cross"],
    "parameter_values": {
        "fast_len": [5,10,15,20,25,50],
        "slow_len": [20,25,50,80,100,150,200]
    }
}
